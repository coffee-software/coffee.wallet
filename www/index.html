<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Security-Policy"
        content="default-src * data: gap: file: https://* 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src * blob:; img-src 'self' data: content:;">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="viewport-fit=cover, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <meta name="theme-color" content="#766054">
        <link rel="apple-touch-icon" href="pwa/icon512.png">
        <link rel="stylesheet" type="text/css" href="css/widgets.css">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link rel="stylesheet" type="text/css" href="css/layout.css">
        <link rel="stylesheet" type="text/css" href="css/ui.css">
        <link rel="manifest" href="./manifest.json">
        <title>Coffee Wallet</title>
    </head>
    <body>
        <div id="nav">
          <div class="stitch"></div>

          <a id="refresh" href="javascript:app.updateMarketCap()" class="navButton spinner">
            <img class="nonet" src="icons/nonet.png" alt="refresh"/>
            <img class="testing" src="icons/refreshall.png" alt="refresh"/>
          </a>

          <div class="totals">
            <h1>
              <span id="grandTotal"></span>
            </h1>
            <h2>
              (<span id="totalOnline"></span> online)
            </h2>
          </div>

        </div>
        <div id="container">
          <div id="swiper">
            <div id="historyTab" class="swipe_tab">
              <div class="tab_inner">
                <ul id="history">
                  <li class="info">loading history ...</li>
                </ul>
              </div>
            </div>
            <div id="walletsTab" class="swipe_tab">
              <div id="wallets" class="tab_inner">
                <div id="pwaInfo">
                  <div class="issue" id="pwaBeta">
                    <strong>Warning:</strong> This is <strong>BETA</strong> version of Coffee Wallet.
                  </div>
                  <div class="issue" id="pwaPersist">
                    <strong>Warning:</strong> Browser does not support persistent storage.
                    <br/>
                    Data might vanish at any moment, adding app to home screen usually fixes this issue.
                  </div>
                  <div class="issue" id="pwaInstall">
                    You are running Coffee Wallet in your browser.
                    <br/>
                    It is recommended to run app in standalone mode.
                  </div>
                  <div class="pwaActions">
                    <a href="#" onclick="OsPlugins.openInSystemBrowser('https://github.com/fsw/coffee.wallet/wiki/Coffee-Wallet-PWA');">read more</a>
                    <button id="installPwa">ADD TO HOME</button>
                  </div>
                </div>
                <div id="walletsList">
                </div>
          	    <div onclick="app.popupAddCoin()" class="walletsAddButton">
                  <img src="icons/add.png" alt="add"/>
                  add wallet
          	    </div>
              </div>
            </div>
            <div id="toolsTab" class="swipe_tab">
              <div class="tab_inner toolsTab">
                <div id="tools">

                  <div class="row">
                    <button class="toolbtn" onclick="app.popupSettings()" style="margin-right:5px;">
                      <img src="icons/settings.png" alt="settings"/>
                      settings
                    </button>
                    <button class="toolbtn" onclick="app.popupHelp()" style="margin-left:5px;margin-right:5px;">
                      <img src="icons/help.png" alt="help"/>
                      help
                    </button>
                      <button class="toolbtn" onclick="app.exportAllKeys()" style="margin-left:5px;">
                        <img src="icons/export.png" alt="export"/>
                        backup
                      </button>
                  </div>

                  <div class="row">
                    <button class="f1 toolbtn" onclick="app.scanAnyQrCode()" style="margin-right:5px;">
                      <img src="icons/quickscan.png" alt="scan"/>
                      scan
                      <br/>
                      QR code
                    </button>

                    <button class="f1 toolbtn" onclick="app.pasteAnyClipboard()" style="margin-left:5px;">
                      <img src="icons/quickpaste.png" alt="paste"/>
                      paste
                      <br/>
                      clipboard
                    </button>
                  </div>
                  <div class="row">
                    <button class="toolbtn" onclick="app.popupSendViaMessage()" style="margin-right:5px;">
                      <img src="icons/email.png" alt="message"/>
                      send via
                      <br/>
                      message
                    </button>
                    <button class="toolbtn airdrop-button hidden" onclick="app.popupAirdrop()" style="margin-left:5px;margin-right:5px;">
                      <img src="icons/heart.png" alt="tokens"/>
                      tokens
                      <br/>
                      airdrop
                    </button>
                    <button class="toolbtn" onclick="app.popupExchange()" style="margin-left:5px;">
                      <img src="icons/exchange.png" alt="exchange"/>
                      quick
                      <br/>
                      exchange
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    <div id="foot">
      <div onclick="app.tabHistory()" class="tab">
        <img src="icons/history.png" alt="history"/>
        <br/>
        history
      </div>
      <div onclick="app.tabWallets()" class="tab active">
        <img src="icons/home.png" alt="wallets"/>
        <br/>
        wallets
      </div>
      <div onclick="app.tabTools()" class="tab">
       <img src="icons/tools.png" alt="tools"/>
       <br/>
       tools
     </div>
    </div>
	  <div id="overlay"></div>

        <div id="popup">
          <div id="popupHead">
            <a href="javascript:app.closePopup()" class="close"><img src="icons/hide.drk.png" alt="close"/></a>
            <div class="stitchHolder"></div>
            <div class="titleHolder">
              <h2 id="popupTitle"></h2>
            </div>
          </div>
          <div id="popupContent">
            <div id="sendViaMessagePopup" style="display:none;">
              <div class="bg-creme popup-head">
                <div class="rowIcon"><img class="coinIcon coinBig" src="icons/messageglyph.png" alt="message"/></div>
                <h2>send via message</h2>
                <h3></h3>
              </div>
              <p>This feature can be used to send crypto-currencies to your friends that do not have a wallet yet.</p>
              <p>After selecting value you will be able to send a special link to someone using SMS, email or any other medium.</p>
              <p>Receiver of this message will click this link and will be instructed on how to install wallet and receive coins easily.</p>
              <p>This is done by sending a transfer to a temporary "escrow" wallet whose private key is included in the message. So this is not a centralized feature and Coffee Wallet services will not receive this key at any moment.</p>
              <p>You can use this feature with coins whose transaction fees are not paid with other currency.</p>
              <div id="sendViaMessageButtons">
              </div>
              <h2>outgoing messages log</h2>
              <table id="sendViaMessageHistory">
                <tr><td>your history is empty</td></tr>
              </table>
            </div>
            <div id="exchangePopup" style="display:none;">
              <div class="bg-creme popup-head">
                <h2>Exchange</h2>
              </div>
              <div class="section">
                exchange:
                <div id="exchangeProvider"></div>
              </div>
              <div style="overflow:auto;">
                <div style="width:70%; float:left; padding-bottom: 10px;">
                  <div id="exchangeShortDescription"></div>
                  <div id="exchangeLink"></div>
                </div>
                <img id="exchangeIcon" src="" alt="logo" style="max-width:30%; float:right;"/>
              </div>
              <div class="section">
                sell:
                <div id="exchangeSellCoin"></div>
                <div id="exchangeSellAmount"></div>
                <div style="text-align:right;">
                  minimum: <a id="exchangeSellMin" href="#" onclick="app.exchangeSellAmount.setValue(parseFloat(this.textContent));"></a>
                  <!--max: <a id="exchangeSellMax" href="#" onclick="app.exchangeSellAmount.setValue(parseFloat(this.textContent));"></a>-->
                  + transaction network fee
                </div>
              </div>
              <div class="section">
                buy:
                <div id="exchangeBuyCoin"></div>
                <div id="exchangeBuyAmount"></div>
                <div style="text-align:right;">
                  This is <b>estimated</b> and depends on current market dynamics.
                </div>
              </div>
              <!--div class="section">
                Coffee Wallet does not charge additional fees. You will get same results exchanging directly.
              </div-->
              <div class="actions row buttons">
                <button id="exchangeButton" class="box f1" onclick="app.doExchange()">
                  Exchange
                </button>
              </div>
            </div>
            <div id="coinInfoPopup" class="details-popup" style="display:none;">
              <div class="bg-creme popup-head">
                <div class="rowIcon active"><img id="coinInfoIcon" class="coinIcon coinBig" src="" alt="coin"/></div>
                <h2 id="coinInfoName">&nbsp;</h2>
                <h3 id="coinInfoSubName">&nbsp;</h3>
                <h3 id="coinInfoCurrentPrice">&nbsp;</h3>
              </div>
              <div id="coinInfoButtons" class="details-buttons"></div>
              <div class="spacing stitch"></div>
              <div id="coinInfoWallet" class="details"></div>
              <div class="spacing stitch"></div>
              <div id="coinInfoActions"></div>
              <div class="spacing stitch"></div>
              <div id="coinInfoAbout"></div>
              <div class="spacing stitch"></div>
              <div id="coinInfoAdvanced"></div>
            </div>
            <div id="offlineAssetDetails" class="details-popup" style="display:none;">
              <div class="bg-creme popup-head">
                <div class="rowIcon active">
                  <img id="offlineAssetCoinIcon" class="coinIcon coinBig" src="" alt="coin"/>
                  <div id="offlineAssetIcon" class="coinBig" style="display: inline-block; margin-left: 14px;"></div>
                </div>
                <h2 id="offlineAssetName"></h2>
                <h3 id="offlineAssetSubName"></h3>
              </div>
              <div id="offlineAssetButtons" class="details-buttons"></div>
              <div class="spacing stitch"></div>
              <div id="offlineAssetInfo" class="details"></div>
              <div class="spacing stitch"></div>
              <div id="offlineAssetActions"></div>
            </div>
            <div id="offlineAssetsPopup" style="display:none;">
              <div class="bg-creme popup-head">
                <div class="rowIcon active"><img id="offlineAssetsIcon" class="coinIcon coinBig" src="" alt="coin"/></div>
                <h2 id="offlineAssetsTitle" style="text-align:center;">portfolio</h2>
                <h3 id="offlineAssetsSubtitle" style="text-align:center;">portfolio</h3>
              </div>
              <div class="unpad">
                <div id="offlineAssets">

                </div>
              </div>

              <div class="spacing">&nbsp;</div>
              <div class="row spacing buttons">
                <button class="box f1" onclick="app.popupAddOfflineAsset('balance')">
                  add balance
                </button>
                <button id="newAddressButton" class="box f1" onclick="app.popupAddNewAddress()">
                  new address
                </button>
                <button id="addAddressButton" class="box f1" onclick="app.popupAddOfflineAsset('address')">
                  add address
                </button>
              </div>
            </div>

            <div id="settingsPopup" style="display:none;">
              <div class="bg-creme popup-head">
                <h2>Settings</h2>
              </div>
              <h3>Fiat Currency</h3>
              <div id="priceProviderSlot"></div>
              <div id="priceUnitSlot"></div>
              <p style="padding-bottom: 10px;">All values will be displayed in this currency.</p>

              <h3>Developer Tools</h3>
              <label class="checkbox">
                <input type="checkbox" id="settingsEnableTestCoins" />
                <div class="fakecheck"></div>
                enable test network coins
              </label>
              <p style="padding-bottom: 10px;">Get access to Bitcoin Testnet or ETH Ropsten.</p>
              <div class="row spacing buttons">
                <button class="box f1" onclick="app.saveSettings()">
                  Save
                </button>
              </div>

            </div>
            <div id="addCoinPopup" style="display:none;">
              <div class="bg-creme popup-head">
                <h2>add cryptos</h2>
              </div>
              <div style="padding:0 7px 20px 7px">
                <div class="field dark" style="margin-bottom: 15px;">
                  <input id="addCoinFilter" value="" required/>
                  <label for="addCoinFilter">search</label>
                </div>
                <label class="checkbox">
                  <input type="checkbox" id="addCoinOnlySupported" />
                  <div class="fakecheck"></div>
                  only coins with local wallet support
                </label>
              </div>
              <div id="allCoins"></div>
              <div id="moreCoins"></div>
            </div>
            <div id="helpPopup" style="display:none;">
              <div class="bg-creme popup-head">
                <h2>Help</h2>
              </div>
              <div style="text-align:center;">
                <h2>Coffee Wallet</h2>
                <h3 id="helpPopupVersion">Version: <strong><span ></span></strong></h3>
                <p>
                  <a href="#" onclick="OsPlugins.openInSystemBrowser('https://wallet.coffee/');" style="font-size: 14px;">https://wallet.coffee/</a>
                </p>
                <p>
                  Coffee Wallet is an open source wallet and portfolio for blockchain assets.
                </p>
                <p>
                  It can be used to watch your funds stored elsewhere (paper/hardware/app/online wallets).
                  It also has a support for a local wallet so you can send and receive selected coins from the app.
                </p>
                <p>
                  <a href="#" onclick="OsPlugins.openInSystemBrowser('https://twitter.com/CoffeeWallet');"><img width="42" src="icons/twitter.png" alt="twitter"/></a>
                  &nbsp;&nbsp;
                  <a href="#" onclick="OsPlugins.openInSystemBrowser('https://www.reddit.com/r/CoffeeWallet/');"><img width="42" src="icons/reddit.png" alt="reddit"/></a>
                  &nbsp;&nbsp;
                  <a href="#" onclick="OsPlugins.openInSystemBrowser('https://t.me/CoffeeWallet');"><img width="42" src="icons/telegram.png" alt="telegram"/></a>
                </p>
                <p>
                  <a href="#" onclick="OsPlugins.openRateAppDialog();" style="font-size: 14px;">rate application</a>
                </p>
                <p>
                  <a href="#" onclick="OsPlugins.openInSystemBrowser('https://github.com/fsw/coffee.wallet/wiki');" style="font-size: 14px;">online documentation</a>
                </p>
              </div>
            </div>
          </div>
        </div>

        <div id="formPopup">
          <div id="addOfflineAssetPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img id="addOfflineAssetPopupIcon" class="coinIcon coinBig" src="" alt="close"/></div>
            </div>
            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png" alt="cancel"/> cancel</button>
              <button class="f1 submit" onclick="app.saveOfflineAsset()"><span id="addOfflineAssetPopupSave">save</span> <img src="icons/ico.send.png" alt="send"/></button>
            </div>

            <div id="addOfflineAssetAddrDiv"></div>

            <div id="addOfflineAssetBalanceDiv" class="field">
              <input type="number" min="0" step="0.000000000001" id="addOfflineAssetBalance" value="" required />
              <label for="addOfflineAssetBalance">balance</label>
            </div>
            <div class="field">
              <input id="addOfflineAssetComment" value="" required />
              <label for="addOfflineAssetComment">comment</label>
            </div>
            <div id="addOfflineAssetAddrTools" class="formButtons row">
              <button class="f1" onclick="app.pasteClipboard(app.pasteToPortfolioItemAddressEdit.bind(app))">
                paste
                <img src="icons/paste.png" alt="paste"/>
              </button>
              <button class="f1" onclick="app.scanQrCode(app.pasteToPortfolioItemAddressEdit.bind(app))">
                <img src="icons/scan.png" alt="scan"/>
                scan
              </button>
            </div>

          </div>
          <div id="sendPaymentPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img id="sendPaymentIcon" class="coinIcon coinBig" src="" alt="coin"/></div>
            </div>
            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png" alt="cancel"/> cancel</button>
              <button id="sendButton" class="f1 submit" onclick="app.sendPayment()">send <img src="icons/ico.send.png" alt="send"/></button>
            </div>

            <div id="sendCoinAddrDiv" class="normalSend">

            </div>
              <div id="sendCoinAmountInput"></div>
              <div id="sendCoinBalanceAfter" class="adv-form-option">
                <div class="row">
                  <div id="balanceAfter" class="f4"></div>
                  <div class="f1 max-button">
                    <button id="sendCoinMaxButton" onclick="app.sendCoinSetMax()">
                      send&nbsp;max
                    </button>
                  </div>
                </div>
              </div>

              <div id="sendCoinFeeInfo" class="default adv-form-option">
                <div class="row">
                  <div id="feeInfo" class="f4"></div>
                  <div class="f1 customize-button" >
                    <button onclick="getElementById('sendCoinFeeInfo').classList.remove('default')">
                      customize
                    </button>
                  </div>
                </div>
                <div id="sendCoinFeeDiv">

                </div>
              </div>

              <div class="normalSend formButtons row">
                <button class="f1" onclick="app.pasteClipboard(app.pasteToSendForm.bind(app))">
                  <img src="icons/paste.png" alt="paste"/>
                  paste
                </button>
                <button class="f1" onclick="app.scanQrCode(app.pasteToSendForm.bind(app))">
                  <img src="icons/scan.png" alt="scan"/>
                  scan
                </button>
              </div>

          </div>
          <div id="receivePaymentPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img id="receivePaymentIcon" class="coinIcon coinBig" src="" alt="coin"/></div>
              <div id="receiveCoinIdenticon" class="circleIcon coinBig"></div>
            </div>
            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png" alt="close"/> close</button>
              <button class="f1 submit" onclick="app.copyReceiveCoinAddrToClp()">copy <img src="icons/ico.copy.png" alt="copy"/></button>
            </div>

            <div class="receiveCode">
              <textarea readonly="readonly" id="receiveCoinAddr"></textarea>
              <div id="receiveCoinQrcode" class="qr-code-display"></div>
            </div>

            <div id="receiveCoinNote"></div>

            <div id="receiveCoinBottom">
              <form class="custom-amount" onsubmit="getElementById('receiveCoinBottom').classList.remove('custom-amount'); return false;">
                <div id="receiveCoinAmountInput"></div>
                <div class="row formButtons">
                  <button class="f1" type="submit" onclick="app.receiveAmountInputWidget.setValue(null)" style="color:#766054;"><img src="icons/ico.cancel.png" alt="cancel"/> clear</button>
                  <button class="f1" type="submit"><img src="icons/ico.set.png" alt="set"/> OK</button>
                </div>
              </form>

              <div class="no-custom-amount formButtons row">
                <button class="f1" onclick="app.shareReceivePaymentCode()"><img src="icons/share.png" alt="share"/> share</button>
                <button class="f1" onclick="getElementById('receiveCoinBottom').classList.add('custom-amount')"><img src="icons/customize.png" alt="customize"/> <span id="setAmountLabel">set ammount</span></button>
              </div>
            </div>

          </div>
          <div id="importPrivateKeyPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img id="importPrivateKeyIcon" class="coinIcon coinBig" src="" alt="import"/></div>
            </div>
            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png" alt="cancel"/> cancel</button>
              <button class="f1 submit" onclick="app.importPrivateKey()">import <img src="icons/ico.send.png" alt="send"/></button>
            </div>
            <div class="field">
              <input
                      id="importPrivateKeyInput"
                      value=""
                      required
              />
              <label for="importPrivateKeyInput">private key</label>
              <div class="legend"></div>
            </div>
            <div class="formButtons row">
              <button class="f1" onclick="app.pasteClipboard(app.pasteToField.bind(app, 'importPrivateKeyInput'))">
                <img src="icons/paste.png" alt="paste"/>
                paste
              </button>
              <button class="f1" onclick="app.scanQrCode(app.pasteToField.bind(app, 'importPrivateKeyInput'))">
                <img src="icons/scan.png" alt="scan"/>
                scan
              </button>
            </div>
          </div>

        </div>

        <div id="messages">
        </div>

        <div id="lockPopup" class="hidden">
            <div id="lockPopupContent">
              <h1 id="lockTitle">Confirm</h1>
              <div class="stitch"></div>
              <div id="lockMessage" class="spacing">
                confirm
              </div>
              <div class="stitch"></div>
              <div class="spacing row">
                <button id="lockPopupCancel" class="f1" onclick="app.lockDialogCancel();">
                  <img src="icons/no.png" alt="cancel"/>
                  <span id="lockPopupCancelText">cancel</span>
                </button>
                <button id="lockPopupConfirm" class="f1" onclick="app.lockDialogConfirm();">
                  <img src="icons/yes.png" alt="confirm"/>
                  <span id="lockPopupConfirmText">confirm</span>
                </button>
              </div>
            </div>
        </div>
        <div id="mobileQRScanner">
          <h2>Scan QR Code</h2>
          <div class="stitch"></div>
          <div id="mobileQRCancel"></div>
          <video id="mobileQRPreview"></video>
          <div id="mobileQRCamera">camera</div>
        </div>

        <div id="loading" class="show"><img src="img/loading.svg" alt="loading..."/></div>

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="plugins.js"></script>
        <script type="text/javascript" src="config.js"></script>
        <script type="text/javascript" src="app.min.js"></script>
        <script type="text/javascript">
          window.app = new coffee.App();
          function handleOpenURL(url) {
            setTimeout(app.openUrl.bind(app, url), 0);
          }
          window.onerror = app.onJsError.bind(app);
          window.onunhandledrejection = app.onUnhandledRejection.bind(app);
        </script>
        <script type="text/javascript" src="vendor/qrcode.js"></script>
        <script type="text/javascript" src="vendor/pulltorefresh.min.js"></script>
    </body>
</html>
